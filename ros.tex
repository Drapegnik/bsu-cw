\chapter{ФРЭЙМВОРК ROBOT OPERATING SYSTEM}

\section{Определение}

Операционная система для роботов \textbf{ROS} - распределенный фрэймворк для программирования роботов \hyperref[itm:ros]{[\ref{itm:ros}]}. Включает в себя основные функции операционной системы: аппаратную абстракцию, низкоуровневый доступ к устройствам, предоставление стандартных функций для простых задач, управление пакетами, несмотря на это ROS нельзя назвать операционной системой в традиционном понимании этого определения. Можно сказать что ROS это удобная архитектура, а также набор правил и пакетов для её построения. Включает огромное количество open source (\textit{распространяемых в свободном доступе}) пакетов, комбинируя которые, можно строить сложные системы (навигация, планирование, восприятие, моделирование и др.). Поддерживается только на операционной системе Linux (Ubuntu).

\vspace{1em}
Основные достоинства ROS: 
\begin{enumerate}
    \item Возможность абстрагироваться от конкретного робота и оборудования для него;
    \item Возможность повторного использования кода, путем вынесения его в пакет и используя в дальнейшем как зависимость;
    \item Удобная отладка и тестирование как на реальном роботе, так и с помощью симулятора;
    \item Распределённость, с помощью которой достигается высокий коэффициент масштабирования;
    \item Независимость от языка разработки программного обеспечения, поддерживаются такие языки как: C++, Python, Matlab и другие.
\end{enumerate}

\section{Архитектура системы}

В основе ROS лежит система графа - обработка данных осуществляется в узлах (\textit{nodes}), которые связываются \quotes{рёбрами} - сообщениями. Для осуществления коммуникаций в системе существует понятие каналов (\textit{topics}) - каждый узел может как подписаться на получение сообщений из какого-то канала, так и осуществлять публикацию новых каналов и сообщений. Все узлы имеют уникальные имена и могут находить друг-друга через специальный сервис - \textit{master}. Каждый узел может предоставлять свой сервис или пользоваться сервисом другого узла. В отличие от сообщений, которые реализуют связь один ко многим, сервис позволяет устанавливать соединение один к одному, поэтому сервис ожидает подтверждения о получении сообщения от своего подписчика. Сообщения поддерживают сложную, вложенную структуру, массивы, а также имеют строгую типизацию - всё это предоставляет дополнительные возможности для удобной передачи данных. Аналогично с другими языками узлы связываются с внешним миром через стандартные потоки ввода и вывода (\textbf{stdin/stdout}), представленные в виде пакета \textbf{rosout}. Все системные узлы объединены в подграф, который называется \textbf{roscore}.

\section{Выводы}

Таким образом ROS обеспечивает очень удобную и расширяемую систему для программирования роботов, например: за работу обычного робота может отвечать сразу несколько условно независимых узлов: один контролирует лазер, с помощью которого робот ищет препятствие, другой узел управляет колесами и приводом, ещё один отвечает за позиционирование, а следующий за планирование.

Такое чёткое следование принципам разделения ответственности (\textit{single responsibility}) ведёт к дополнительной отказоустойчивости, ведь так как узлы изолированы, выход из строя одного, не должен касаться остальных. Также это упрощает структуру кода, так как сразу, на уровне архитектуры, декомпозирует задачи и позволяет узлам экспортировать минимальный набор программных интерфейсов (\textit{api}).
