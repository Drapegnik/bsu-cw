\chapter{ЭКСПЕРИМЕНТАЛЬНЫЕ РЕЗУЛЬТАТЫ}

\section{Подготовка данных}

Для проведения экспериментов были получены данные видеосъёмки дроном Phantom DJI 4. Из этих видеороликов мной были подготовлены \textbf{data set'ы} (наборы данных). Экспериментально было установлено, что для того чтобы получить $70\%$ перекрытие на соседних изображениях (необходимое условия для хорошего сопоставления) требуется нарезать видео с частотой хотя бы 1 кадр в 2секунды. Отдельно рассматривались прямые и обратные (в другую сторону) пролеты БПЛА над одной и той же местностью, для возможности имитации задачи возвращения дрона домой по построенной карте.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.8\textwidth]{dataset.png}
    \caption{Снимки полученные с БПЛА}
    \label{fig:dataset}
\end{figure}

\section{Matching эксперименты}

Как первое приближение (начальные данные от которых впоследствии можно будет отталкиваться) был взят следующий простой алгоритм: каждый снимок сделанный на прямом пролете (кривая $AB$) сопоставляется с каждым снимком из обратного (кривая $BA$). Для $n$ прямых снимков и $m$ обратных получаем $n*m$ сравнений. В итоге для $\forall$ пары снимков $\{i, j | i=\overline{1,n}, j=\overline{1,m}\}$ получаем нейкий \textbf{score} (результат) совпадения их ключевых точек, на основе которого можно судить соответствуют ли эти снимки одной и той же точке в пространстве.

Мной была написана реализация этого алгоритма на языке программирования $Python$ используя \hyperref[itm:sift]{SIFT [\ref{itm:sift}]} и \hyperref[itm:orb]{ORB [\ref{itm:orb}]} в реализации \hyperref[itm:opencv]{OpenCV [\ref{itm:opencv}]}. В качестве параметров скрипт принимает название алгоритма и максимальное количество ключевых точек, которые будут выделятся на изображении.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.8\textwidth]{features.png}
    \caption{Найденные ключевые точки}
    \label{fig:features}
\end{figure}

\begin{figure}[h]
    \centering
    \includegraphics[width=1.0\textwidth]{matches.png}
    \caption{Совпадения ключевых точек}
    \label{fig:matches}
\end{figure}

Варьируя количество выделяемых ключевых точек на разных алгоритмах были поставлены эксперименты. Для визуализации качества сопоставления были построены \textbf{heatmap'ы} (тепловые карты) - диаграммы показывающие насколько хорошо совпадает изображение $x_i$ с $x_j$ (расположены соответственно на осях абсцисс и ординат). Сопоставление будем считать хорошим, если на диаграмме будет точно прослеживаться траектория: так как при пролётах туда-обратно мы должны получать, что $x_0$ и $y_n$, $x_1$ и $y_{n-1}$ ... и т.д. изображают одну и ту же точку пространства. Также анализировалось время работы программы. Полученные результаты на наборах 40x32 изображений (1280 сравнений) представлены в виде \textit{алгоритм - количество точек - время работы} на рисунке \ref{fig:heatmaps}

\begin{figure}[h]
    \centering
    \begin{subfigure}[h]{0.45\textwidth}
        \includegraphics[width=\textwidth]{orb_heatmap200.png}
        \caption{ORB - 200 точек - 18 мин.}
        \label{fig:orb_200}
    \end{subfigure}
    ~ 
    \begin{subfigure}[h]{0.45\textwidth}
        \includegraphics[width=\textwidth]{sift_heatmap200.png}
        \caption{SIFT - 200 точек - 3,7 ч.}
        \label{fig:sift_200}
    \end{subfigure}
    ~ 
    \begin{subfigure}[h]{0.45\textwidth}
        \includegraphics[width=\textwidth]{orb_heatmap1000.png}
        \caption{ORB - 1000 точек - 26 мин.}
        \label{fig:mouse}
    \end{subfigure}
    ~
    \begin{subfigure}[h]{0.45\textwidth}
        \includegraphics[width=\textwidth]{sift_heatmap1000.png}
        \caption{SIFT - 1000 точек - 4 ч.}
        \label{fig:mouse}
    \end{subfigure}
    \caption{Сравнительные тепловые диаграммы}
    \label{fig:heatmaps}
\end{figure}

\section{Выводы}

Анализируя диаграммы (Рисунок \ref{fig:heatmaps}) видно, что при малом количестве выделяемых ключевых точек прослеживается траектория полёта. Причём, что $SIFT$ даёт много ложных срабатываний при очень большом времени работы - 3,5 часа против 20 минут у $ORB$. Однако при увеличении точек совпадения \quotes{размазываются} по всей диаграмме, это значит, что ошибка растёт и нужно улучшать методы feature extraction для получения лучших ключевых точек.

Учитывая время работы и полученные результаты на большом числе точек навигация с использованием этого алгоритма, конечно же, не представляется возможной. Однако мы получили первое приближение, решения \quotes{в лоб} от которого можно отталкиваться и сравнивать с ним результаты будущих исследований.

\newpage